<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.4) on Tue Nov 05 23:30:03 CET 2019 -->
<title>Allocator (stormpot 3.0 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2019-11-05">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Allocator (stormpot 3.0 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":6,"i1":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Allocator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="moduleLabelInType">Module</span>&nbsp;<a href="../module-summary.html">stormpot</a></div>
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">stormpot</a></div>
<h2 title="Interface Allocator" class="title">Interface Allocator&lt;T extends <a href="Poolable.html" title="interface in stormpot">Poolable</a>&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - any type that implements Poolable.</dd>
</dl>
<dl>
<dt>All Known Subinterfaces:</dt>
<dd><code><a href="Reallocator.html" title="interface in stormpot">Reallocator</a>&lt;T&gt;</code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">Allocator&lt;T extends <a href="Poolable.html" title="interface in stormpot">Poolable</a>&gt;</span></pre>
<div class="block"><p>An Allocator is responsible for the creation and destruction of
<a href="Poolable.html" title="interface in stormpot"><code>Poolable</code></a> objects.</p>
<p>This is where the objects in the Pool comes from. Clients of the Stormpot
library needs to provide their own Allocator implementations.</p>
<p>Implementations of this interface must be thread-safe, because there is no
knowing whether pools will try to access it concurrently or not. The easiest
way to achieve this is to just make the
<a href="#allocate(stormpot.Slot)"><code>allocate</code></a>
and <a href="#deallocate(T)"><code>deallocate</code></a> methods synchronised,
but this might cause problems for the pools ability to allocate objects fast
enough, if they are very slow to construct. Pools might want to deal with
very slow allocations by allocating in more than one thread, but
synchronizing the <a href="#allocate(stormpot.Slot)"><code>allocate(Slot)</code></a> method will render that strategy
ineffective.</p>
<p>A better approach to thread-safety is to not have any shared mutable state
in the allocator, if at all possible.</p>
<p>Implementations must also be interruption-safe.
When a pool is <a href="Pool.html#shutdown()">shut down</a>, its background
allocation thread may be interrupted, and this thread may be interacting
with the allocator instance when this happens.</p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Chris Vest &lt;<a href="mailto:mr.chrisvest@gmail.com">mr.chrisvest@gmail.com</a>&gt;</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="Reallocator.html" title="interface in stormpot"><code>Reallocator</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="Allocator.html" title="type parameter in Allocator">T</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#allocate(stormpot.Slot)">allocate</a></span>&#8203;(<a href="Slot.html" title="interface in stormpot">Slot</a>&nbsp;slot)</code></th>
<td class="colLast">
<div class="block">Create a fresh new instance of T for the given slot.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#deallocate(T)">deallocate</a></span>&#8203;(<a href="Allocator.html" title="type parameter in Allocator">T</a>&nbsp;poolable)</code></th>
<td class="colLast">
<div class="block">Deallocate, if applicable, the given Poolable and free any resources
associated with it.</div>
</td>
</tr>
</table>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="allocate(stormpot.Slot)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocate</h4>
<pre class="methodSignature"><a href="Allocator.html" title="type parameter in Allocator">T</a>&nbsp;allocate&#8203;(<a href="Slot.html" title="interface in stormpot">Slot</a>&nbsp;slot)
    throws java.lang.Exception</pre>
<div class="block"><p>Create a fresh new instance of T for the given slot.</p>
<p>The returned <a href="Poolable.html" title="interface in stormpot"><code>Poolable</code></a> must obey the contract that, when
<a href="Poolable.html#release()"><code>Poolable.release()</code></a> is called on it, it must delegate
the call onto the <a href="Slot.html#release(stormpot.Poolable)"><code>Slot.release(Poolable)</code></a> method of the here
given slot object.</p>
<p>Exceptions thrown by this method may propagate out through the
<a href="PoolTap.html#claim(stormpot.Timeout)"><code>claim</code></a> method of a pool, in the form of being
wrapped inside a <a href="PoolException.html" title="class in stormpot"><code>PoolException</code></a>. Pools must be able to handle these
exceptions in a sane manner, and are guaranteed to return to a working
state if an Allocator stops throwing exceptions from its allocate method.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>slot</code> - The slot the pool wish to allocate an object for.
Implementers do not need to concern themselves with the details of a
pools slot objects. They just have to call release on them as the
protocol demands.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A newly created instance of T. Never <code>null</code>.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - If the allocation fails.</dd>
</dl>
</li>
</ul>
<a id="deallocate(stormpot.Poolable)">
<!--   -->
</a><a id="deallocate(T)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>deallocate</h4>
<pre class="methodSignature">void&nbsp;deallocate&#8203;(<a href="Allocator.html" title="type parameter in Allocator">T</a>&nbsp;poolable)
         throws java.lang.Exception</pre>
<div class="block"><p>Deallocate, if applicable, the given Poolable and free any resources
associated with it.</p>
<p>This is an opportunity to close any connections or files, flush buffers,
empty caches or what ever might need to be done to completely free any
resources represented by this Poolable.</p>
<p>Note that a Poolable must never touch its slot object after it has been
deallocated.</p>
<p>Pools, on the other hand, will guarantee that the same object is never
deallocated more than once.</p>
<p>Note that pools will always silently swallow exceptions thrown by the
deallocate method. They do this because there is no knowing whether the
deallocation of an object will be done synchronously by a thread calling
<a href="Poolable.html#release()"><code>release</code></a> on a Poolable, or asynchronously by
a clean-up thread inside the pool.</p>
<p>Deallocation from the release of an expired object, and deallocation from
the shut down procedure of a <a href="Pool.html" title="class in stormpot"><code>Pool</code></a> behave the same way in this
regard. They will both silently swallow any exception thrown.</p>
<p>On the other hand, pools are guaranteed to otherwise correctly deal with
any exception that might be thrown. The shut down procedure will still
complete, and release will still maintain the internal data structures of
the pool to make the slot available for new allocations.</p>
<p>If you need to somehow specially deal with the exceptions thrown by the
deallocation of objects, then you should do this in the allocator itself,
or in a wrapper around your allocator.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>poolable</code> - The non-null Poolable instance to be deallocated.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.Exception</code> - if the deallocation encounters an error.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Allocator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2011-2019&#x2013;2019. All rights reserved.</small></p>
</footer>
</body>
</html>
