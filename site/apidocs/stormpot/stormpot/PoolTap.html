<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (11.0.4) on Tue Nov 05 23:30:03 CET 2019 -->
<title>PoolTap (stormpot 3.0 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2019-11-05">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../jquery/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../jquery/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../jquery/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../jquery/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../jquery/jquery-3.3.1.js"></script>
<script type="text/javascript" src="../../jquery/jquery-migrate-3.0.1.js"></script>
<script type="text/javascript" src="../../jquery/jquery-ui.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PoolTap (stormpot 3.0 API)";
        }
    }
    catch(err) {
    }
//-->
var data = {"i0":10,"i1":6,"i2":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../";
var useModuleDirectories = true;
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<header role="banner">
<nav role="navigation">
<div class="fixedNav">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PoolTap.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<ul class="navListSearch">
<li><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
</div>
<div class="navPadding">&nbsp;</div>
<script type="text/javascript"><!--
$('.navPadding').css('padding-top', $('.fixedNav').css("height"));
//-->
</script>
</nav>
</header>
<!-- ======== START OF CLASS DATA ======== -->
<main role="main">
<div class="header">
<div class="subTitle"><span class="moduleLabelInType">Module</span>&nbsp;<a href="../module-summary.html">stormpot</a></div>
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">stormpot</a></div>
<h2 title="Class PoolTap" class="title">Class PoolTap&lt;T extends <a href="Poolable.html" title="interface in stormpot">Poolable</a>&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>stormpot.PoolTap&lt;T&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the type of <a href="Poolable.html" title="interface in stormpot"><code>Poolable</code></a> contained in the pool, and made</dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><code><a href="Pool.html" title="class in stormpot">Pool</a></code></dd>
</dl>
<hr>
<pre>public abstract class <span class="typeNameLabel">PoolTap&lt;T extends <a href="Poolable.html" title="interface in stormpot">Poolable</a>&gt;</span>
extends java.lang.Object</pre>
<div class="block"><p>A PoolTap provides the API for accessing objects in a <a href="Pool.html" title="class in stormpot"><code>Pool</code></a>.</p>
<p>PoolTaps are not necessarily thread-safe, but pools, which extend PoolTap,
are always thread-safe.</p></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Chris Vest &lt;<a href="mailto:mr.chrisvest@gmail.com">mr.chrisvest@gmail.com</a>&gt;</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="Pool.html" title="class in stormpot"><code>Pool</code></a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>&lt;R&gt;&nbsp;java.util.Optional&lt;R&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#apply(stormpot.Timeout,java.util.function.Function)">apply</a></span>&#8203;(<a href="Timeout.html" title="class in stormpot">Timeout</a>&nbsp;timeout,
     java.util.function.Function&lt;<a href="PoolTap.html" title="type parameter in PoolTap">T</a>,&#8203;R&gt;&nbsp;function)</code></th>
<td class="colLast">
<div class="block">Claim an object from the pool and apply the given function to it, returning
the result and releasing the object back to the pool.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>abstract <a href="PoolTap.html" title="type parameter in PoolTap">T</a></code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#claim(stormpot.Timeout)">claim</a></span>&#8203;(<a href="Timeout.html" title="class in stormpot">Timeout</a>&nbsp;timeout)</code></th>
<td class="colLast">
<div class="block">Claim the exclusive rights until released, to an object in the pool.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#supply(stormpot.Timeout,java.util.function.Consumer)">supply</a></span>&#8203;(<a href="Timeout.html" title="class in stormpot">Timeout</a>&nbsp;timeout,
      java.util.function.Consumer&lt;<a href="PoolTap.html" title="type parameter in PoolTap">T</a>&gt;&nbsp;consumer)</code></th>
<td class="colLast">
<div class="block">Claim an object from the pool and supply it to the given consumer, and then
release it back to the pool.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<section role="region">
<ul class="blockList">
<li class="blockList"><a id="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a id="claim(stormpot.Timeout)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>claim</h4>
<pre class="methodSignature">public abstract&nbsp;<a href="PoolTap.html" title="type parameter in PoolTap">T</a>&nbsp;claim&#8203;(<a href="Timeout.html" title="class in stormpot">Timeout</a>&nbsp;timeout)
                 throws <a href="PoolException.html" title="class in stormpot">PoolException</a>,
                        java.lang.InterruptedException</pre>
<div class="block"><p>Claim the exclusive rights until released, to an object in the pool.
Possibly waiting up to the specified amount of time, as given by the
provided <a href="Timeout.html" title="class in stormpot"><code>Timeout</code></a> instance, for one to become available if the
pool has been depleted. If the timeout elapses before an object can be
claimed, then <code>null</code> is returned instead. The timeout will be
honoured even if the Allocators <a href="Allocator.html#allocate(stormpot.Slot)"><code>allocate</code></a>
methods blocks forever. If the given timeout has a zero or negative value,
then the method will not wait.</p>
<p>If the current thread has already one or more objects currently claimed,
then a distinct object will be returned, if one is or becomes available.
This means that it is possible for a single thread to deplete the pool, if
it so desires. However, doing so is inherently deadlock prone, so avoid
claiming more than one object at a time per thread, if at all possible.</p>
<p>This method may throw a PoolException if the pool have trouble allocating
objects. That is, if its assigned Allocator throws exceptions from its
allocate method, or returns <code>null</code>.</p>
<p>An <code>InterruptedException</code> will be thrown if the thread has its
interrupted flag set upon entry to this method, or is interrupted while
waiting. The interrupted flag on the thread will be cleared after
this, as per the general contract of interruptible methods.</p>
<p>If the pool has been shut down, then an <code>IllegalStateException</code> will
be thrown when this method is called. Likewise if we are waiting for an
object to become available, and someone shuts the pool down.</p>
<p>Here&#8217;s an example code snippet, where an object is claimed, printed to
<code>System.out</code>, and then released back to the pool:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">    Poolable obj = pool.claim(TIMEOUT);
    <span class="keyword">if</span> (obj != <span class="predefined-constant">null</span>) {
      <span class="keyword">try</span> {
        <span class="predefined-type">System</span>.out.println(obj);
      } <span class="keyword">finally</span> {
        obj.release();
      }
    }</code></pre>
</div>
</div>
<p>Memory effects:</p>
<div class="ulist">
<ul>
<li>
<p>The <a href="Poolable.html#release()"><code>release</code></a> of an object happens-before
any subsequent claim or <a href="Allocator.html#deallocate(T)"><code>deallocation</code></a> of that object, and,</p>
</li>
<li>
<p>The <a href="Allocator.html#allocate(stormpot.Slot)"><code>allocation</code></a> of an object
happens-before any claim of that object.</p>
</li>
</ul>
</div></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeout</code> - The timeout of the maximum permitted time-slice to wait for
an object to become available. A timeout with a value of zero or less
means that the call will do no waiting, preferring instead to return early
if no objects are available.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>An object of the Poolable subtype T to which the exclusive rights
have been claimed, or <code>null</code> if the timeout period elapsed
before an object became available.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="PoolException.html" title="class in stormpot">PoolException</a></code> - If an object allocation failed because the Allocator
threw an exception from its allocate method, or returned
<code>null</code>, or the
<a href="Expiration.html#hasExpired(stormpot.SlotInfo)"><code>expiration check</code></a> threw an
exception.</dd>
<dd><code>java.lang.InterruptedException</code> - if the current thread is
<code>interrupted</code> upon entry, or becomes interrupted
while waiting.</dd>
<dd><code>java.lang.IllegalArgumentException</code> - if the <code>timeout</code> argument is <code>null</code>.</dd>
</dl>
</li>
</ul>
<a id="apply(stormpot.Timeout,java.util.function.Function)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>apply</h4>
<pre class="methodSignature">public final&nbsp;&lt;R&gt;&nbsp;java.util.Optional&lt;R&gt;&nbsp;apply&#8203;(<a href="Timeout.html" title="class in stormpot">Timeout</a>&nbsp;timeout,
                                             java.util.function.Function&lt;<a href="PoolTap.html" title="type parameter in PoolTap">T</a>,&#8203;R&gt;&nbsp;function)
                                      throws java.lang.InterruptedException</pre>
<div class="block"><p>Claim an object from the pool and apply the given function to it, returning
the result and releasing the object back to the pool.</p>
<p>If an object cannot be claimed within the given timeout, then
<code>Optional.empty()</code> is returned instead. The <code>empty()</code> value is also
returned if the function returns <code>null</code>.</p></div>
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>R</code> - The return type of the given function.</dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeout</code> - The timeout of the maximum permitted amount of time to wait
for an object to become available. A timeout with a value of zero or less
means that the call will do no waiting, preferring instead to return early
if no objects are available.</dd>
<dd><code>function</code> - The function to apply to the claimed object, if any. The
function should avoid further claims, since having more than one object
claimed at a time per thread is inherently deadlock prone.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an <code>Optional</code> of either the return value of applying the
given function to a claimed object, or empty if the timeout elapsed or
the function returned <code>null</code>.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.InterruptedException</code> - if the thread was interrupted.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#claim(stormpot.Timeout)"><code>The claim method for more details on failure modes
and memory effects.</code></a></dd>
</dl>
</li>
</ul>
<a id="supply(stormpot.Timeout,java.util.function.Consumer)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>supply</h4>
<pre class="methodSignature">public final&nbsp;boolean&nbsp;supply&#8203;(<a href="Timeout.html" title="class in stormpot">Timeout</a>&nbsp;timeout,
                            java.util.function.Consumer&lt;<a href="PoolTap.html" title="type parameter in PoolTap">T</a>&gt;&nbsp;consumer)
                     throws java.lang.InterruptedException</pre>
<div class="block"><p>Claim an object from the pool and supply it to the given consumer, and then
release it back to the pool.</p>
<p>If an object cannot be claimed within the given timeout, then this method
returns <code>false</code>. Otherwise, if an object was claimed and supplied to the
consumer, the method returns <code>true</code>.</p></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>timeout</code> - The timeout of the maximum permitted amount of time to wait
for an object to become available. A timeout with a value of zero or less
means that the call will do no waiting, preferring instead to return early
if no objects are available.</dd>
<dd><code>consumer</code> - The consumer to pass the claimed object to, if any. The
consumer should avoid further claims, since having more than one object
claimed at a time per thread is inherently deadlock prone.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if an object could be claimed within the given timeout and
passed to the given consumer, or <code>false</code> otherwise.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.lang.InterruptedException</code> - if the thread was interrupted.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="#claim(stormpot.Timeout)"><code>The claim method for more details on failure modes
and memory effects.</code></a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</section>
</li>
</ul>
</div>
</div>
</main>
<!-- ========= END OF CLASS DATA ========= -->
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../module-summary.html">Module</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/PoolTap.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2011-2019&#x2013;2019. All rights reserved.</small></p>
</footer>
</body>
</html>
